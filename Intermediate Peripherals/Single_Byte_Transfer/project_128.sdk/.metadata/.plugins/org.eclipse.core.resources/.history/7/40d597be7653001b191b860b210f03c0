
#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "xuartns550.h"
#include "xparameters.h"

XUartNs550_Config *uC;
XUartNs550 uI;
XUartNs550Format prev,new;

void uartInit(){

	uC = XUartNs550_LookupConfig(XPAR_AXI_UART16550_0_DEVICE_ID);
	XUartNs550_CfgInitialize(&uI, uC, XPAR_AXI_UART16550_0_BASEADDR);

	XUartNs550_GetDataFormat(&uI, &prev);
	new.BaudRate = 9600;
	prev.BaudRate = new.BaudRate;
	XUartNs550_SetDataFormat(&uI, &prev);
}

int main()
{
    init_platform();
    uartInit();
    u8 data = '9';
    XUartNs550_Send(&uI, &data,1);
    while(XUartNs550_IsSending(&uI));

    cleanup_platform();
    return 0;
}
